<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Checkout | PrimeTemplates</title>
    <style>
        body { font-family: 'Segoe UI', sans-serif; background: #f4f7f9; padding: 20px; color: #2c3e50; }
        .checkout-container { max-width: 450px; margin: 40px auto; background: white; padding: 30px; border-radius: 20px; box-shadow: 0 15px 35px rgba(0,0,0,0.1); }
        .order-box { background: #f8f9fa; padding: 20px; border-radius: 12px; margin-bottom: 20px; border: 1px solid #eee; }
        .row { display: flex; justify-content: space-between; margin-bottom: 10px; }
        .total { font-weight: bold; font-size: 1.3rem; color: #3498db; border-top: 2px solid #ddd; padding-top: 15px; }
        .upi-box { background: #fff9eb; border: 2px dashed #f1c40f; padding: 15px; border-radius: 12px; text-align: center; margin-bottom: 20px; }
        .confirm-btn { width: 100%; background: linear-gradient(45deg, #f09433, #bc1888); color: white; padding: 16px; border: none; border-radius: 12px; font-weight: bold; cursor: pointer; font-size: 1rem; }
        input { width: 70%; padding: 10px; border: 1px solid #ddd; border-radius: 8px; margin-right: 5px; }
        .apply-btn { padding: 10px; background: #2c3e50; color: white; border: none; border-radius: 8px; cursor: pointer; }
    </style>
</head>
<body>

<div class="checkout-container">
    <h2 style="text-align:center; margin-bottom:20px;">Secure Checkout</h2>
    
    <div class="order-box">
        <p style="font-size: 0.7rem; color: #7f8c8d; margin-bottom: 5px;">SELECTED ITEM:</p>
        <h3 id="displayItem" style="margin-bottom: 15px; color: #2c3e50;">Loading...</h3>
        
        <div class="row"><span>Original Price</span> <span id="basePrice">‚Çπ0</span></div>
        <div id="discountRow" class="row" style="display:none; color: #27ae60;"><span>Beta Discount</span> <span id="discountAmt">-‚Çπ0</span></div>
        <div class="row total"><span>Final Total</span> <span id="finalPrice">‚Çπ0</span></div>
    </div>

    <div style="margin-bottom: 20px; text-align: center;">
        <input type="text" id="checkoutCoupon" placeholder="Have a Beta Code?">
        <button class="apply-btn" onclick="applyCheckoutCode()">Apply</button>
        <p id="couponMsg" style="font-size: 0.8rem; margin-top: 5px;"></p>
    </div>

    <div class="upi-box">
        <p style="font-size: 0.8rem; margin-bottom: 5px;">STEP 1: PAY VIA UPI</p>
        <strong style="font-size: 1.1rem; color: #d35400;">yourname@upi</strong>
        <p style="font-size: 0.7rem; margin-top: 5px;">Transfer exactly <b id="payPrompt">‚Çπ0</b></p>
    </div>

    <p style="font-size: 0.8rem; text-align: center; color: #7f8c8d; margin-bottom: 15px;">
        üì∏ Screenshot the payment & the success message, then click below:
    </p>

    <button class="confirm-btn" onclick="confirmOrder()">Confirm on Instagram ‚Üí</button>
</div>

<script>
    const params = new URLSearchParams(window.location.search);
    const itemName = params.get('item') || "Premium Template";
    let price = parseInt(params.get('price')) || 59;
    const hasPreDiscount = params.get('discount') === 'true';

    document.getElementById('displayItem').innerText = itemName.replace(/-/g, ' ');
    document.getElementById('basePrice').innerText = "‚Çπ" + price;
    updatePricing(price);

    if(hasPreDiscount) { applyDiscount(); }

    function updatePricing(amt) {
        document.getElementById('finalPrice').innerText = "‚Çπ" + amt;
        document.getElementById('payPrompt').innerText = "‚Çπ" + amt;
    }

    function applyDiscount() {
        let discount = (price > 100) ? 100 : 30; // ‚Çπ100 off for bundle, ‚Çπ30 for single
        document.getElementById('discountRow').style.display = 'flex';
        document.getElementById('discountAmt').innerText = "-‚Çπ" + discount;
        updatePricing(price - discount);
    }

    function applyCheckoutCode() {
        const code = document.getElementById('checkoutCoupon').value.toUpperCase();
        if(code.startsWith("PRM") && code.length === 8) {
            applyDiscount();
            document.getElementById('couponMsg').innerText = "‚úÖ Code Applied!";
            document.getElementById('couponMsg').style.color = "#27ae60";
        } else {
            document.getElementById('couponMsg').innerText = "‚ùå Invalid Code";
            document.getElementById('couponMsg').style.color = "#e74c3c";
        }
    }

    function confirmOrder() {
        window.location.href = "https://ig.me/m/primetemplate1";
    }
</script>

</body>
</html>
